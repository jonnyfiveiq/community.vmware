---
community.vmware.vcenter_standard_key_provider:
  query: >-
    .key_provider_clusters[] | {
      name: .key_id,
      canonical_facts: {
        id: .key_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "Resource"
      }
    }

community.vmware.vmware_about_info:
  query: >-
    . | select(. != null) | {
      name: .instance_uuid,
      canonical_facts: {
        instance_uuid: .instance_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_category:
  query: >-
    .category_results | select(. != null) | {
      name: .category_id,
      canonical_facts: {
        id: .category_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_category_info:
  query: >-
    .tag_category_info[] | {
      name: .category_id,
      canonical_facts: {
        id: .category_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_cluster_info:
  query: >-
    .clusters | select(. != null) | {
      name: .moid,
      canonical_facts: {
        moid: .moid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_content_deploy_ovf_template:
  query: >-
    .vm_deploy_info | select(. != null) | {
      name: .vm_id,
      canonical_facts: {
        id: .vm_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_content_deploy_template:
  query: >-
    .vm_deploy_info | select(. != null) | {
      name: .vm_id,
      canonical_facts: {
        id: .vm_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_content_library_info:
  query: >-
    .content_lib_details[] | {
      name: .library_id,
      canonical_facts: {
        id: .library_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_content_library_manager:
  query: >-
    .content_library_info | select(. != null) | {
      name: .library_id,
      canonical_facts: {
        id: .library_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_datacenter_info:
  query: >-
    .datacenter_info[] | {
      name: .moid,
      canonical_facts: {
        moid: .moid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_datastore_info:
  query: >-
    .datastores[] | {
      name: .vmfs_uuid,
      canonical_facts: {
        id: .vmfs_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_dvswitch:
  query: >-
    . | select(. != null) | {
      name: .net_flow_observation_domain_id,
      canonical_facts: {
        id: .net_flow_observation_domain_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_dvswitch_info:
  query: >-
    .distributed_virtual_switches[] | {
      name: .uuid,
      canonical_facts: {
        uuid: .uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_folder_info:
  query: >-
    .flat_folder_info[] | {
      name: .moid,
      canonical_facts: {
        moid: .moid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_disk:
  query: >-
    .disk_data | select(. != null) | {
      name: .backing_uuid,
      canonical_facts: {
        id: .backing_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_disk_info:
  query: >-
    .guest_disk_info | select(. != null) | {
      name: .backing_uuid,
      canonical_facts: {
        id: .backing_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_info:
  query: >-
    .instance | select(. != null) | {
      name: .hw_product_uuid,
      canonical_facts: {
        bios_uuid: .hw_product_uuid,
        instance_uuid: .instance_uuid,
        moid: .moid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_instant_clone:
  query: >-
    .vm_info | select(. != null) | {
      name: .instance_uuid,
      canonical_facts: {
        instance_uuid: .instance_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_move:
  query: >-
    .instance | select(. != null) | {
      name: .hw_product_uuid,
      canonical_facts: {
        bios_uuid: .hw_product_uuid,
        instance_uuid: .instance_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_serial_port:
  query: >-
    .serial_port_data | select(. != null) | {
      name: .serial_port_data,
      canonical_facts: {
        id: .serial_port_data
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_snapshot:
  query: >-
    .snapshot_results | select(. != null) | {
      name: .id,
      canonical_facts: {
        id: .id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_snapshot_info:
  query: >-
    .guest_snapshots | select(. != null) | {
      name: .id,
      canonical_facts: {
        id: .id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_guest_tools_info:
  query: >-
    .vmtools_info | select(. != null) | {
      name: .vm_uuid,
      canonical_facts: {
        id: .vm_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_host_facts:
  query: >-
    .ansible_facts | select(. != null) | {
      name: .ansible_uuid,
      canonical_facts: {
        id: .ansible_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_host_logbundle_info:
  query: >-
    .manifests[] | {
      name: .id,
      canonical_facts: {
        id: .id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_local_role_info:
  query: >-
    .local_role_info[] | {
      name: .role_id,
      canonical_facts: {
        id: .role_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_local_role_manager:
  query: >-
    .privileges[] | {
      name: .role_id,
      canonical_facts: {
        id: .role_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_local_user_info:
  query: >-
    .local_user_info | select(. != null) | {
      name: .user_id,
      canonical_facts: {
        id: .user_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_object_role_permission_info:
  query: >-
    .permission_info[] | {
      name: .role_id,
      canonical_facts: {
        id: .role_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_tag:
  query: >-
    .tag_status | select(. != null) | {
      name: .tag_id,
      canonical_facts: {
        id: .tag_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_tag_info:
  query: >-
    .tag_facts | select(. != null) | {
      name: .tag_category_id,
      canonical_facts: {
        id: .tag_category_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_target_canonical_info:
  query: >-
    .scsi_tgt_info | select(. != null) | {
      name: .target_lun_uuid,
      canonical_facts: {
        id: .target_lun_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_vcenter_settings:
  query: >-
    .results | select(. != null) | {
      name: .runtime_unique_id,
      canonical_facts: {
        id: .runtime_unique_id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_vm_info:
  query: >-
    .virtual_machines[] | {
      name: .uuid,
      canonical_facts: {
        uuid: .uuid,
        moid: .moid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_vm_shell:
  query: >-
    .results | select(. != null) | {
      name: .uuid,
      canonical_facts: {
        uuid: .uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_vm_storage_policy:
  query: >-
    .vmware_vm_storage_policy | select(. != null) | {
      name: .id,
      canonical_facts: {
        id: .id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_vm_storage_policy_info:
  query: >-
    .spbm_profiles[] | {
      name: .id,
      canonical_facts: {
        id: .id
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

community.vmware.vmware_vm_vm_drs_rule:
  query: >-
    .result | select(. != null) | {
      name: .rule_uuid,
      canonical_facts: {
        id: .rule_uuid
      },
      facts: {
        infra_type: "community.vmwarey",
        infra_bucket: "Compute",
        device_type: "VM"
      }
    }

